<!DOCTYPE html>
<html lang=" en ">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>
    Apache Mahout
    
  </title>

  <meta name="description" content="Distributed Linear Algebra">

  <link rel="stylesheet" href="/assets/css/main.css">

  <!-- Font Awesome -->
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Maven+Pro:400,500" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,700,700i" rel="stylesheet">

  <link rel="canonical" href="http://mahout.apache.org//documentation/developers/github.html">
  <link rel="alternate" type="application/rss+xml" title="Apache Mahout" href="/feed.xml">


</head>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-98314020-1', 'auto');
  ga('send', 'pageview');
</script>

<body>

  <nav class="navbar navbar-expand-lg navbar-light bg-light navbar-mahout">

    <div class="container">

        <a class="navbar-brand" href="/">
          <img src="/assets/mahout-logo-blue.svg" alt="">
        </a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">

            <ul class="navbar-nav ml-auto">

                <!-- About -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle"
                       href="" id="navbarDropdownMenuLink-about"
                       data-toggle="dropdown"
                       aria-haspopup="true"
                       aria-expanded="false">About</a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        <a class="dropdown-item"
                           href="https://www.apache.org/foundation/how-it-works.html">Overview of the Apache Software Foundation</a>
                        <a class="dropdown-item"
                           href="/about/distributed-matrix-math.html">Overview of Distributed Matrix Math</a>
                        <a class="dropdown-item"
                           href="/about/how-to-contribute.html">How to Contribute</a>
                    </div>
                </li>

                <!-- Documentation -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle"
                       href="" id="navbarDropdownMenuLink-docs"
                       data-toggle="dropdown"
                       aria-haspopup="true"
                       aria-expanded="false">Documentation</a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        <a class="dropdown-item"
                           href="/documentation/users">User Guide</a>
                        <a class="dropdown-item"
                           href="/documentation/developers">Developer Guide</a>
                        <a class="dropdown-item"
                           href="/docs/0.13.0/api/docs/">API Reference</a>
                        <a class="dropdown-item"
                           href="/documentation/tutorials">Tutorials and Examples</a>
                    </div>
                </li>

                <!-- Download -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle"
                       href="" id="navbarDropdownMenuLink-download"
                       data-toggle="dropdown"
                       aria-haspopup="true"
                       aria-expanded="false">Download</a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        <a class="dropdown-item"
                           href="/download/downloads/html">Latest Release</a>
                        <a class="dropdown-item"
                           href="https://github.com/apache/mahout/">Github Repository</a>
                        <a class="dropdown-item"
                           href="/download/quickstart">Quickstart</a>
                    </div>
                </li>

                <!-- Community -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle"
                       href="" id="navbarDropdownMenuLink-community"
                       data-toggle="dropdown"
                       aria-haspopup="true"
                       aria-expanded="false">Community</a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">

                        <a class="dropdown-item"
                           href="/community/">Overview</a>
                        <a class="dropdown-item"
                           href="/community/who-we-are.html">Who We Are</a>
                        <a class="dropdown-item"
                           href="/community/mailing-lists.html">Mailing Lists</a>
                        <a class="dropdown-item"
                           href="https://issues.apache.org/jira/browse/MAHOUT">Issue Tracker</a>
                        <a class="dropdown-item"
                           href="/documentation/developers/">Developer Documentation</a>
                        <a class="dropdown-item"
                           href="/community/coc.html">Code of Conduct</a>
                        <a class="dropdown-item"
                           href="/404.html">Partners and Supporters</a>
<!--                        Maybe make a new page that merges professional support and powered-by-mahout?-->
                    </div>
                </li>

                <!-- News and Events -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle"
                       href="" id="navbarDropdownMenuLink-news-events"
                       data-toggle="dropdown"
                       aria-haspopup="true"
                       aria-expanded="false">News and Events</a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        <a class="dropdown-item"
                           href="/news-and-events/news.html">Latest Project News</a>
                        <a class="dropdown-item"
                           href="/news-and-events/events.html">Upcoming Events</a>
                        <a class="dropdown-item"
                           href="/news-and-events/announcements.html">Announcements</a>
                    </div>
                </li>


                <!-- GitHub -->
                <li class="nav-item">
                    <a class="nav-link" href="http://github.com/apache/mahout"><i class="fa fa-github"></i></a>
                </li>

            </ul>

            <!-- <form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
        </form> -->

        </div>

    </div>

</nav>


  <div class="container mt-5 pb-4">

  <div class="row">

    <div class="col-lg-8">
      <h1 id="github-setup-and-pull-requests-prs">Github Setup and Pull Requests (PRs)</h1>

<p>There are several ways to setup Git for committers and contributors. Contributors can safely setup 
Git any way they choose but committers should take extra care since they can push new commits to the master at 
Apache and various policies there make backing out mistakes problematic. Therefore all but very small changes should 
go through a PR, even for committers. To keep the commit history clean take note of the use of –squash below
when merging into apache/master.</p>

<h2 id="git-setup-for-committers">Git setup for Committers</h2>

<p>This describes setup for one local repo and two remotes. It allows you to push the code on your machine to either your Github repo or to git-wip-us.apache.org. 
You will want to fork github’s apache/mahout to your own account on github, this will enable Pull Requests of your own. 
Cloning this fork locally will set up “origin” to point to your remote fork on github as the default remote. 
So if you perform “git push origin master” it will go to github.</p>

<p>To attach to the apache git repo do the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git remote add apache https://git-wip-us.apache.org/repos/asf/mahout.git
</code></pre></div></div>

<p>To check your remote setup</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git remote -v
</code></pre></div></div>

<p>you should see something like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>origin    https://github.com/your-github-id/mahout.git (fetch)
origin    https://github.com/your-github-id/mahout.git (push)
apache    https://git-wip-us.apache.org/repos/asf/mahout.git (fetch)
apache    https://git-wip-us.apache.org/repos/asf/mahout.git (push)
</code></pre></div></div>

<p>Now if you want to experiment with a branch everything, by default, points to your github account because ‘origin’ is default. You can work as normal using only github until you are ready to merge with the apache remote. Some conventions will integrate with Apache Jira ticket numbers.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout -b mahout-xxxx #xxxx typically is a Jira ticket number
#do some work on the branch
git commit -a -m "doing some work"
git push origin mahout-xxxx # notice pushing to **origin** not **apache**
</code></pre></div></div>

<p>Once you are ready to commit to the apache remote you can merge and push them directly or better yet create a PR.</p>

<h2 id="how-to-create-a-pr-committers">How to create a PR (committers)</h2>

<p>Push your branch to Github:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout mahout-xxxx
git push origin mahout-xxxx
</code></pre></div></div>

<p>Go to your mahout-xxxx branch on Github. Since you forked it from Github’s apache/mahout it will default
any PR to go to apache/master.</p>

<ul>
  <li>Click the green “Compare, review, and create pull request” button.</li>
  <li>You can edit the to and from for the PR if it isn’t correct. The “base fork” should be apache/mahout unless you are collaborating 
separately with one of the committers on the list. The “base” will be master. Don’t submit a PR to one of the other 
branches unless you know what you are doing. The “head fork” will be your forked repo and the “compare” will be 
your mahout-xxxx branch.</li>
  <li>Click the “Create pull request” button and name the request “MAHOUT-XXXX” all caps. 
This will connect the comments of the PR to the mailing list and Jira comments.</li>
  <li>From now on the PR lives on github’s apache/mahout. You use the commenting UI there.</li>
  <li>If you are looking for a review or sharing with someone else say so in the comments but don’t worry about 
automated merging of your PR–you will have to do that later. The PR is tied to your branch so you can respond to 
comments, make fixes, and commit them from your local repo. They will appear on the PR page and be mirrored to Jira 
and the mailing list.</li>
</ul>

<p>When you are satisfied and want to push it to Apache’s remote repo proceed with <strong>Merging a PR</strong></p>

<h2 id="how-to-create-a-pr-contributors">How to create a PR (contributors)</h2>

<p>Create pull requests: [<a href="https://help.github.com/articles/creating-a-pull-request">1</a>].</p>

<p>Pull requests are made to apache/mahout repository on Github. In the Github UI you should pick the master 
branch to target the PR as described for committers. This will be reviewed and commented on so the merge is 
not automatic. This can be used for discussing a contributions in progress.</p>

<h2 id="merging-a-pr-yours-or-contributors">Merging a PR (yours or contributors)</h2>

<p>Start with reading [<a href="https://help.github.com/articles/merging-a-pull-request#merging-locally">2</a>] (merging locally).</p>

<p>Remember that pull requests are equivalent to a remote github branch with potentially a multitude of commits. 
In this case it is recommended to squash remote commit history to have one commit per issue, rather 
than merging in a multitude of contributor’s commits. In order to do that, as well as close the PR at the 
same time, it is recommended to use <strong>squash commits</strong>.</p>

<p>Merging pull requests are equivalent to a “pull” of a contributor’s branch:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout master      # switch to local master branch
git pull apache master   # fast-forward to current remote HEAD
git pull --squash https://github.com/cuser/mahout cbranch  # merge to master 
</code></pre></div></div>

<p>–squash ensures all PR history is squashed into single commit, and allows committer to use his/her own
message. Read git help for merge or pull for more information about <code class="language-plaintext highlighter-rouge">--squash</code> option. In this example we 
assume that the contributor’s Github handle is “cuser” and the PR branch name is “cbranch”. 
Next, resolve conflicts, if any, or ask a contributor to rebase on top of master, if PR went out of sync.</p>

<p>If you are ready to merge your own (committer’s) PR you probably only need to merge (not pull), since you have a local copy 
that you’ve been working on. This is the branch that you used to create the PR.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout master      # switch to local master branch
git pull apache master   # fast-forward to current remote HEAD
git merge --squash mahout-xxxx
</code></pre></div></div>

<p>Remember to run regular patch checks, build with tests enabled, and change CHANGELOG.</p>

<p>If everything is fine, you now can commit the squashed request along the lines</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git commit --author &lt;contributor_email&gt; -a -m "MAHOUT-XXXX description closes apache/mahout#ZZ"
</code></pre></div></div>

<p>MAHOUT-XXXX is all caps and where <code class="language-plaintext highlighter-rouge">ZZ</code> is the pull request number on apache/mahout repository. Including 
“closes apache/mahout#ZZ” will close the PR automatically. More information is found here [<a href="https://help.github.com/articles/closing-issues-via-commit-messages">3</a>].</p>

<p>Next, push to git-wip-us.a.o:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>push apache master
</code></pre></div></div>

<p>(this will require Apache handle credentials).</p>

<p>The PR, once pushed, will get mirrored to github. To update your github version push there too:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>push origin master
</code></pre></div></div>

<p><em>Note on squashing: Since squash discards remote branch history, repeated PRs from the same remote branch are 
difficult for merging. The workflow implies that every new PR starts with a new rebased branch. This is more 
important for contributors to know, rather than for committers, because if new PR is not mergeable, github
would warn to begin with. Anyway, watch for dupe PRs (based on same source branches). This is a bad practice.</em></p>

<h2 id="closing-a-pr-without-committing-for-committers">Closing a PR without committing (for committers)</h2>

<p>When we want to reject a PR (close without committing), we can just issue an empty commit on master’s HEAD 
<em>without merging the PR</em>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git commit --allow-empty -m "closes apache/mahout#ZZ *Won't fix*"
git push apache master
</code></pre></div></div>

<p>that should close PR <code class="language-plaintext highlighter-rouge">ZZ</code> on github mirror without merging and any code modifications in the master repository.</p>

<h2 id="apachegithub-integration-features">Apache/github integration features</h2>

<p>Read [<a href="https://blogs.apache.org/infra/entry/improved_integration_between_apache_and">4</a>]. Comments and PRs with Mahout issue handles should post to mailing lists and Jira.
Mahout issue handles must be in the form MAHOUT-YYYYY (all capitals). Usually it makes sense to 
file a jira issue first, and then create a PR with description</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MAHOUT-YYYY: &lt;jira-issue-description&gt;
</code></pre></div></div>

<p>In this case all subsequent comments will automatically be copied to jira without having to mention 
jira issue explicitly in each comment of the PR.</p>


    </div>

    <div class="col-lg-4">
      <!-- Apache Software Foundation Links -->
<div class="card mb-4 sidebar">
    <div class="card-header">
        Apache Software Foundation
    </div>
    <div class="card-body">
        <ul class="list-unstyled mb-0">
            <li>
                <a href="https://www.apache.org/foundation/how-it-works.html">Apache Software Foundation</a>
            </li>
            <li>
                <a href="http://www.apache.org/licenses/">Apache License</a>
            </li>
            <li>
                <a href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            </li>
            <li>
                <a href="http://www.apache.org/foundation/thanks.html">Thanks</a>
            </li>
        </ul>
    </div>
</div>

<!-- Twitter Posts Widget -->
<div class="card">
    <div class="card-body">
        <a class="twitter-timeline" data-height="500" href="https://twitter.com/ApacheMahout">Tweets by ApacheMahout</a>
        <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
    </div>
</div>

    </div>

  </div>

</div>


  <footer class="footer bg-light">
    <div class="container text-center small">
        Copyright &copy; 2014-2024 <a href="http://www.apache.org/">The Apache Software Foundation</a>, Licensed under the Apache License, Version 2.0.
    </div>
</footer>


  <script src="/assets/vendor/jquery/jquery-slim.min.js"></script>
  <script src="/assets/vendor/popper/popper.min.js"></script>
  <script src="/assets/vendor/bootstrap/js/bootstrap.min.js"></script>
  <script src="/assets/header.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

</body>

</html>
