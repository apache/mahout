<!DOCTYPE html>
<html lang=" en ">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>
    lda-commandline
    
  </title>

  <meta name="description" content="Distributed Linear Algebra">

  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/github-markdown.css">

  <!-- Font Awesome -->
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Maven+Pro:400,500" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,700,700i" rel="stylesheet">

  <link rel="canonical" href="http://mahout.apache.org//Map_Reduce_Folder/clustering/lda-commandline.html">
  <link rel="alternate" type="application/rss+xml" title="Apache Mahout" href="/feed.xml">

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_HTML">
    MathJax.Hub.Config({
      "HTML-CSS": {
        availableFonts: ["TeX"],
      },
      tex2jax: {
        inlineMath: [['$','$'],["\\(","\\)"]]},
      displayMath: [ ['$$','$$'], ['\[','\]'] ],
      TeX: {
        extensions: ["AMSmath.js", "AMSsymbols.js", "color.js"],
        equationNumbers: {
          autoNumber: "AMS"
        }
      },
      showProcessingMessages: false,
      messageStyle: "none",
      imageFont: null,
      "AssistiveMML": { disabled: true }
    });
  </script>
</head>

<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(["setDoNotTrack", true]);
  _paq.push(["disableCookies"]);
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://analytics.apache.org/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '70']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->

<body>

  <nav class="navbar navbar-expand-lg navbar-light bg-light navbar-mahout">

    <div class="container">

        <a class="navbar-brand" href="/">
          <img src="/assets/mahout-logo-blue.svg" alt="">
        </a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">

            <ul class="navbar-nav ml-auto">

                <!-- About -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle"
                       href="" id="navbarDropdownMenuLink-about"
                       data-toggle="dropdown"
                       aria-haspopup="true"
                       aria-expanded="false">About</a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        <a class="dropdown-item"
                           href="https://www.apache.org/foundation/how-it-works.html">Overview of the Apache Software Foundation</a>
                        <a class="dropdown-item"
                           href="/about/distributed-matrix-math.html">Overview of Distributed Matrix Math</a>
                        <a class="dropdown-item"
                           href="/about/how-to-contribute.html">How to Contribute</a>
                    </div>
                </li>

                <!-- Qumat -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle"
                       href="" id="navbarDropdownMenuLink-qumat"
                       data-toggle="dropdown"
                       aria-haspopup="true"
                       aria-expanded="false">Qumat</a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        <a class="dropdown-item"
                           href="/qumat">Overview</a>
                        <a class="dropdown-item"
                           href="/qumat/core">Qumat Core</a>
                        <a class="dropdown-item"
                           href="/qumat/qdp">QDP (Quantum Data Plane)</a>
                        <a class="dropdown-item"
                           href="/qumat/quantum-computing-primer">Quantum Computing Primer</a>
                        <a class="dropdown-item"
                           href="/qumat/papers">Papers</a>
                    </div>
                </li>

                <!-- Download -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle"
                       href="" id="navbarDropdownMenuLink-download"
                       data-toggle="dropdown"
                       aria-haspopup="true"
                       aria-expanded="false">Download</a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        <a class="dropdown-item"
                           href="/download/downloads.html">Latest Release</a>
                        <a class="dropdown-item"
                           href="https://github.com/apache/mahout/">Github Repository</a>
                    </div>
                </li>

                <!-- Community -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle"
                       href="" id="navbarDropdownMenuLink-community"
                       data-toggle="dropdown"
                       aria-haspopup="true"
                       aria-expanded="false">Community</a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">

                        <a class="dropdown-item"
                           href="/community/">Overview</a>
                        <a class="dropdown-item"
                           href="/community/who-we-are.html">Who We Are</a>
                        <a class="dropdown-item"
                           href="/community/mailing-lists.html">Mailing Lists</a>
                        <a class="dropdown-item"
                           href="https://issues.apache.org/jira/browse/MAHOUT">Issue Tracker</a>
                        <a class="dropdown-item"
                           href="/documentation/developers/">Developer Documentation</a>
                        <a class="dropdown-item"
                           href="/community/coc.html">Code of Conduct</a>
                    </div>
                </li>

                <!-- News and Events -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle"
                       href="/news-and-events/news.html" id="navbarDropdownMenuLink-news-events"
                       aria-haspopup="true"
                       aria-expanded="false">News</a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        <a class="dropdown-item"
                           href="/news-and-events/news.html">News</a>
                    </div>
                </li>


                <!-- GitHub -->
                <li class="nav-item">
                    <a class="nav-link" href="http://github.com/apache/mahout"><i class="fa fa-github"></i></a>
                </li>

            </ul>

            <!-- <form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
        </form> -->

        </div>

    </div>

</nav>


  <p><a name="lda-commandline-RunningLatentDirichletAllocation(algorithm)fromtheCommandLine"></a></p>
<h1 id="running-latent-dirichlet-allocation-algorithm-from-the-command-line">Running Latent Dirichlet Allocation (algorithm) from the Command Line</h1>
<p><a href="https://issues.apache.org/jira/browse/MAHOUT-897">Since Mahout v0.6</a>
 lda has been implemented as Collapsed Variable Bayes (cvb).</p>

<p>Mahout’s LDA can be launched from the same command line invocation whether
you are running on a single machine in stand-alone mode or on a larger
Hadoop cluster. The difference is determined by the $HADOOP_HOME and
$HADOOP_CONF_DIR environment variables. If both are set to an operating
Hadoop cluster on the target machine then the invocation will run the LDA
algorithm on that cluster. If either of the environment variables are
missing then the stand-alone Hadoop configuration will be invoked instead.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./bin/mahout cvb &lt;OPTIONS&gt;
</code></pre></div></div>

<ul>
  <li>In $MAHOUT_HOME/, build the jar containing the job (mvn install) The job
will be generated in $MAHOUT_HOME/core/target/ and it’s name will contain
the Mahout version number. For example, when using Mahout 0.3 release, the
job will be mahout-core-0.3.job</li>
</ul>

<p><a name="lda-commandline-Testingitononesinglemachinew/ocluster"></a></p>
<h2 id="testing-it-on-one-single-machine-wo-cluster">Testing it on one single machine w/o cluster</h2>

<ul>
  <li>Put the data: cp <PATH TO="" DATA=""> testdata</PATH></li>
  <li>
    <p>Run the Job:</p>

    <p>./bin/mahout cvb -i testdata <OTHER OPTIONS=""></OTHER></p>
  </li>
</ul>

<p><a name="lda-commandline-Runningitonthecluster"></a></p>
<h2 id="running-it-on-the-cluster">Running it on the cluster</h2>

<ul>
  <li>(As needed) Start up Hadoop: $HADOOP_HOME/bin/start-all.sh</li>
  <li>Put the data: $HADOOP_HOME/bin/hadoop fs -put <PATH TO="" DATA=""> testdata</PATH></li>
  <li>
    <p>Run the Job:</p>

    <p>export HADOOP_HOME=<Hadoop Home="" Directory="">
  export HADOOP_CONF_DIR=$HADOOP_HOME/conf
  ./bin/mahout cvb -i testdata <OTHER OPTIONS=""></OTHER></Hadoop></p>
  </li>
  <li>Get the data out of HDFS and have a look. Use bin/hadoop fs -lsr output
to view all outputs.</li>
</ul>

<p><a name="lda-commandline-CommandlineoptionsfromMahoutcvbversion0.8"></a></p>
<h1 id="command-line-options-from-mahout-cvb-version-08">Command line options from Mahout cvb version 0.8</h1>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mahout cvb -h
  --input (-i) input					  Path to job input directory.
  --output (-o) output					  The directory pathname for output.
  --maxIter (-x) maxIter				  The maximum number of iterations.
  --convergenceDelta (-cd) convergenceDelta		  The convergence delta value
  --overwrite (-ow)					  If present, overwrite the output directory before running job
  --num_topics (-k) num_topics				  Number of topics to learn
  --num_terms (-nt) num_terms				  Vocabulary size
  --doc_topic_smoothing (-a) doc_topic_smoothing	  Smoothing for document/topic distribution
  --term_topic_smoothing (-e) term_topic_smoothing	  Smoothing for topic/term distribution
  --dictionary (-dict) dictionary			  Path to term-dictionary file(s) (glob expression supported)
  --doc_topic_output (-dt) doc_topic_output		  Output path for the training doc/topic distribution
  --topic_model_temp_dir (-mt) topic_model_temp_dir	  Path to intermediate model path (useful for restarting)
  --iteration_block_size (-block) iteration_block_size	  Number of iterations per perplexity check
  --random_seed (-seed) random_seed			  Random seed
  --test_set_fraction (-tf) test_set_fraction		  Fraction of data to hold out for testing
  --num_train_threads (-ntt) num_train_threads		  number of threads per mapper to train with
  --num_update_threads (-nut) num_update_threads	  number of threads per mapper to update the model with
  --max_doc_topic_iters (-mipd) max_doc_topic_iters	  max number of iterations per doc for p(topic|doc) learning
  --num_reduce_tasks num_reduce_tasks			  number of reducers to use during model estimation
  --backfill_perplexity 				  enable backfilling of missing perplexity values
  --help (-h)						  Print out help
  --tempDir tempDir					  Intermediate output directory
  --startPhase startPhase				  First phase to run
  --endPhase endPhase					  Last phase to run
</code></pre></div></div>

  <footer class="footer bg-light">
    <div class="container text-center small">
        Copyright &copy; 2014-2026 <a href="http://www.apache.org/">The Apache Software Foundation</a>, Licensed under the Apache License, Version 2.0.
    </div>
</footer>

  <script src="/assets/vendor/jquery/jquery-slim.min.js"></script>
  <script src="/assets/vendor/popper/popper.min.js"></script>
  <script src="/assets/vendor/bootstrap/js/bootstrap.min.js"></script>
  <script src="/assets/header.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
</body>
</html>
