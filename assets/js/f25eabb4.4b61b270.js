"use strict";(globalThis.webpackChunkmahout_website=globalThis.webpackChunkmahout_website||[]).push([[3222],{7010(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"adr/jekyll-to-docusaurus-migration","title":"ADR-001: Jekyll to Docusaurus Migration","description":"\x3c!--","source":"@site/versioned_docs/version-0.5/adr/001-jekyll-to-docusaurus-migration.md","sourceDirName":"adr","slug":"/adr/jekyll-to-docusaurus-migration","permalink":"/docs/adr/jekyll-to-docusaurus-migration","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/mahout/tree/main/docs/versioned_docs/version-0.5/adr/001-jekyll-to-docusaurus-migration.md","tags":[],"version":"0.5","sidebarPosition":1,"frontMatter":{"title":"ADR-001: Jekyll to Docusaurus Migration","sidebar_label":"ADR-001: Jekyll to Docusaurus"}}');var t=s(4848),r=s(8453);const o={title:"ADR-001: Jekyll to Docusaurus Migration",sidebar_label:"ADR-001: Jekyll to Docusaurus"},c="ADR-001: Jekyll to Docusaurus Migration",l={},d=[{value:"Status",id:"status",level:2},{value:"Date",id:"date",level:2},{value:"Context",id:"context",level:2},{value:"Problems with Jekyll",id:"problems-with-jekyll",level:3},{value:"Requirements",id:"requirements",level:3},{value:"Decision",id:"decision",level:2},{value:"Technology Choices",id:"technology-choices",level:3},{value:"Architecture",id:"architecture",level:3},{value:"Documentation Sync Workflow",id:"documentation-sync-workflow",level:3},{value:"Versioning Strategy",id:"versioning-strategy",level:3},{value:"Consequences",id:"consequences",level:2},{value:"Positive",id:"positive",level:3},{value:"Negative",id:"negative",level:3},{value:"Neutral",id:"neutral",level:3},{value:"Implementation Notes",id:"implementation-notes",level:2},{value:"Key Files Changed",id:"key-files-changed",level:3},{value:"Redirect Strategy",id:"redirect-strategy",level:3},{value:"References",id:"references",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"adr-001-jekyll-to-docusaurus-migration",children:"ADR-001: Jekyll to Docusaurus Migration"})}),"\n",(0,t.jsx)(n.h2,{id:"status",children:"Status"}),"\n",(0,t.jsx)(n.p,{children:"Accepted"}),"\n",(0,t.jsx)(n.h2,{id:"date",children:"Date"}),"\n",(0,t.jsx)(n.p,{children:"2026-01-22"}),"\n",(0,t.jsx)(n.h2,{id:"context",children:"Context"}),"\n",(0,t.jsx)(n.p,{children:"The Apache Mahout website was built using Jekyll 4.3.2 with Bootstrap 5, MathJax 3 for math rendering, and Kramdown for Markdown processing. As the project evolved with the introduction of Qumat (quantum computing capabilities), we needed to evaluate our documentation infrastructure."}),"\n",(0,t.jsx)(n.h3,{id:"problems-with-jekyll",children:"Problems with Jekyll"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Ruby ecosystem maintenance"})," - Managing Ruby/Bundler dependencies and versions adds complexity"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Limited interactivity"})," - Jekyll is purely static; no React components for dynamic content"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Documentation versioning"})," - No built-in support for multi-version documentation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Developer experience"})," - Hot reload and local development workflows are slower"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Documentation sync"})," - No standard pattern for syncing ",(0,t.jsx)(n.code,{children:"/docs"})," with website content"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"requirements",children:"Requirements"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Documentation versioning for Qumat releases (0.4, 0.5, etc.)"}),"\n",(0,t.jsx)(n.li,{children:"Math/LaTeX support for quantum computing documentation"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"/docs"})," directory as source of truth for documentation"]}),"\n",(0,t.jsx)(n.li,{children:"Fast local development with hot reload"}),"\n",(0,t.jsx)(n.li,{children:"React components for enhanced interactivity"}),"\n",(0,t.jsx)(n.li,{children:"Modern JavaScript tooling (Node.js ecosystem)"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"decision",children:"Decision"}),"\n",(0,t.jsxs)(n.p,{children:["Migrate from Jekyll to ",(0,t.jsx)(n.strong,{children:"Docusaurus 3.x"})," with the following configuration:"]}),"\n",(0,t.jsx)(n.h3,{id:"technology-choices",children:"Technology Choices"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Component"}),(0,t.jsx)(n.th,{children:"Decision"}),(0,t.jsx)(n.th,{children:"Rationale"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Framework"}),(0,t.jsx)(n.td,{children:"Docusaurus 3.x"}),(0,t.jsx)(n.td,{children:"Active development, React-based, built-in versioning"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Math rendering"}),(0,t.jsx)(n.td,{children:"KaTeX"}),(0,t.jsx)(n.td,{children:"Faster than MathJax, lighter bundle size, covers 95%+ use cases"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Migration approach"}),(0,t.jsxs)(n.td,{children:["New directory (",(0,t.jsx)(n.code,{children:"website-new/"}),")"]}),(0,t.jsx)(n.td,{children:"Safe migration, can keep Jekyll during transition"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Versioning"}),(0,t.jsx)(n.td,{children:"Enabled from start"}),(0,t.jsx)(n.td,{children:"Supports Qumat release cycle"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"architecture",children:"Architecture"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"website-new/\n\u251c\u2500\u2500 docusaurus.config.ts      # Main configuration\n\u251c\u2500\u2500 sidebars.ts               # Sidebar navigation\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 scripts/\n\u2502   \u2514\u2500\u2500 sync-docs.js          # Syncs /docs \u2192 website-new/docs\n\u251c\u2500\u2500 docs/                     # Current version (synced from /docs)\n\u251c\u2500\u2500 versioned_docs/           # Previous versions (snapshots)\n\u2502   \u2514\u2500\u2500 version-0.4/\n\u251c\u2500\u2500 versions.json             # Version manifest\n\u251c\u2500\u2500 blog/                     # Migrated from Jekyll _posts\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 components/           # React components\n\u2502   \u251c\u2500\u2500 css/custom.css        # Theme customizations\n\u2502   \u2514\u2500\u2500 pages/index.tsx       # Custom homepage\n\u2514\u2500\u2500 static/                   # Images and assets\n"})}),"\n",(0,t.jsx)(n.h3,{id:"documentation-sync-workflow",children:"Documentation Sync Workflow"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"/docs"})," directory at the repository root is the source of truth. A sync script copies documentation to the website at build time:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"npm run sync"})," - Copies ",(0,t.jsx)(n.code,{children:"/docs"})," and ",(0,t.jsx)(n.code,{children:"/qdp/docs"})," to ",(0,t.jsx)(n.code,{children:"website-new/docs/"})]}),"\n",(0,t.jsx)(n.li,{children:"Transforms frontmatter as needed"}),"\n",(0,t.jsxs)(n.li,{children:["Runs automatically before ",(0,t.jsx)(n.code,{children:"npm run build"})," and ",(0,t.jsx)(n.code,{children:"npm run start"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"This pattern allows:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Documentation to live alongside code"}),"\n",(0,t.jsxs)(n.li,{children:["Website to always reflect latest ",(0,t.jsx)(n.code,{children:"/docs"})]}),"\n",(0,t.jsx)(n.li,{children:"Version snapshots to preserve historical documentation"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"versioning-strategy",children:"Versioning Strategy"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"current"})," (0.5-dev): Active development, synced from ",(0,t.jsx)(n.code,{children:"/docs"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"0.4"}),": First stable snapshot, frozen documentation"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"To create a new version:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm run docusaurus docs:version X.Y\n"})}),"\n",(0,t.jsx)(n.h2,{id:"consequences",children:"Consequences"}),"\n",(0,t.jsx)(n.h3,{id:"positive",children:"Positive"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Versioned documentation"})," - Users can view docs for their specific Qumat version"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Faster builds"})," - Node.js build pipeline is faster than Jekyll"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"React components"})," - Can add interactive examples, code playgrounds"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Better DX"})," - Fast hot reload, TypeScript support, modern tooling"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"KaTeX performance"})," - Math rendering is 10x faster than MathJax"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Active community"})," - Docusaurus has strong Meta backing and active maintenance"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"negative",children:"Negative"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Learning curve"})," - Team needs to learn React/Docusaurus patterns"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Migration effort"})," - One-time cost to migrate all content"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"KaTeX limitations"})," - Some advanced MathJax features may not work (rare edge cases)"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"neutral",children:"Neutral"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Bundle size"})," - Slightly larger JavaScript bundle, but better caching"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"CI/CD changes"})," - GitHub Actions updated from Ruby to Node.js"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"implementation-notes",children:"Implementation Notes"}),"\n",(0,t.jsx)(n.h3,{id:"key-files-changed",children:"Key Files Changed"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:".github/workflows/website.yml"})," - Now uses Node.js instead of Ruby"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"website-new/docusaurus.config.ts"})," - Main Docusaurus configuration"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"website-new/scripts/sync-docs.js"})," - Documentation sync script"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"website-new/src/components/WaveAnimation/"})," - Ported hero animation"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"redirect-strategy",children:"Redirect Strategy"}),"\n",(0,t.jsx)(n.p,{children:"Client-side redirects handle old Jekyll URLs:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"/news.html"})," \u2192 ",(0,t.jsx)(n.code,{children:"/blog"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Additional redirects can be added to ",(0,t.jsx)(n.code,{children:"docusaurus.config.ts"})," as needed."]}),"\n",(0,t.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docusaurus.io/",children:"Docusaurus documentation"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://katex.org/docs/supported.html",children:"KaTeX supported functions"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/apache/mahout/discussions/",children:"GitHub discussion"})," (original proposal)"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453(e,n,s){s.d(n,{R:()=>o,x:()=>c});var i=s(6540);const t={},r=i.createContext(t);function o(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);