"use strict";(globalThis.webpackChunkmahout_website=globalThis.webpackChunkmahout_website||[]).push([[8082],{4375(e,t,n){n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"qdp/testing","title":"Testing","description":"Unit tests for QDP core library covering input validation, API workflows, and memory safety.","source":"@site/docs/qdp/testing.md","sourceDirName":"qdp","slug":"/qdp/testing","permalink":"/docs/next/qdp/testing","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/mahout/tree/main/docs/docs/qdp/testing.md","tags":[],"version":"current","frontMatter":{"title":"Testing"},"sidebar":"docsSidebar","previous":{"title":"Observability","permalink":"/docs/next/qdp/observability"},"next":{"title":"Pqc","permalink":"/docs/next/advanced/pqc"}}');var s=n(4848),r=n(8453);const o={title:"Testing"},a="QDP Core Test Suite",l={},d=[{value:"Test Files",id:"test-files",level:2},{value:"<code>validation.rs</code> - Input Validation",id:"validationrs---input-validation",level:3},{value:"<code>api_workflow.rs</code> - API Workflow",id:"api_workflowrs---api-workflow",level:3},{value:"<code>memory_safety.rs</code> - Memory Safety",id:"memory_safetyrs---memory-safety",level:3},{value:"<code>examples/dataloader_throughput.rs</code> - DataLoader Batch Throughput",id:"examplesdataloader_throughputrs---dataloader-batch-throughput",level:3},{value:"<code>common/mod.rs</code> - Test Utilities",id:"commonmodrs---test-utilities",level:3},{value:"Running Tests",id:"running-tests",level:2},{value:"Requirements",id:"requirements",level:2}];function c(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"qdp-core-test-suite",children:"QDP Core Test Suite"})}),"\n",(0,s.jsx)(t.p,{children:"Unit tests for QDP core library covering input validation, API workflows, and memory safety."}),"\n",(0,s.jsx)(t.h2,{id:"test-files",children:"Test Files"}),"\n",(0,s.jsxs)(t.h3,{id:"validationrs---input-validation",children:[(0,s.jsx)(t.code,{children:"validation.rs"})," - Input Validation"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Invalid encoder strategy rejection"}),"\n",(0,s.jsx)(t.li,{children:"Qubit size validation (mismatch, zero, max limit 30)"}),"\n",(0,s.jsx)(t.li,{children:"Empty and zero-norm data rejection"}),"\n",(0,s.jsx)(t.li,{children:"Error type formatting"}),"\n",(0,s.jsx)(t.li,{children:"Non-Linux platform graceful failure"}),"\n"]}),"\n",(0,s.jsxs)(t.h3,{id:"api_workflowrs---api-workflow",children:[(0,s.jsx)(t.code,{children:"api_workflow.rs"})," - API Workflow"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Engine initialization"}),"\n",(0,s.jsx)(t.li,{children:"Amplitude encoding with DLPack pointer management"}),"\n"]}),"\n",(0,s.jsxs)(t.h3,{id:"memory_safetyrs---memory-safety",children:[(0,s.jsx)(t.code,{children:"memory_safety.rs"})," - Memory Safety"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Memory leak detection (100 encode/free cycles)"}),"\n",(0,s.jsx)(t.li,{children:"Concurrent state vector management"}),"\n",(0,s.jsx)(t.li,{children:"DLPack tensor metadata validation"}),"\n"]}),"\n",(0,s.jsxs)(t.h3,{id:"examplesdataloader_throughputrs---dataloader-batch-throughput",children:[(0,s.jsx)(t.code,{children:"examples/dataloader_throughput.rs"})," - DataLoader Batch Throughput"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Simulates a QML training loop that streams batches of 64 vectors"}),"\n",(0,s.jsx)(t.li,{children:"Producer/consumer model with configurable prefetch to avoid GPU starvation"}),"\n",(0,s.jsx)(t.li,{children:"Reports vectors-per-second to verify QDP keeps the GPU busy"}),"\n",(0,s.jsxs)(t.li,{children:["Run: ",(0,s.jsx)(t.code,{children:"cargo run -p qdp-core --example dataloader_throughput --release"})]}),"\n",(0,s.jsxs)(t.li,{children:["Environment overrides: ",(0,s.jsx)(t.code,{children:"BATCHES=<usize>"})," (default 200), ",(0,s.jsx)(t.code,{children:"PREFETCH=<usize>"})," (default 16)"]}),"\n"]}),"\n",(0,s.jsxs)(t.h3,{id:"commonmodrs---test-utilities",children:[(0,s.jsx)(t.code,{children:"common/mod.rs"})," - Test Utilities"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"create_test_data(size)"}),": Generates normalized test data"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"running-tests",children:"Running Tests"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Run all tests\ncargo test --package qdp-core\n\n# Run specific test file\ncargo test --package qdp-core --test validation\ncargo test --package qdp-core --test api_workflow\ncargo test --package qdp-core --test memory_safety\n"})}),"\n",(0,s.jsx)(t.h2,{id:"requirements",children:"Requirements"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Linux OS (tests skip on other platforms)"}),"\n",(0,s.jsx)(t.li,{children:"CUDA-capable GPU (tests skip if unavailable)"}),"\n",(0,s.jsx)(t.li,{children:"Rust toolchain with CUDA support"}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453(e,t,n){n.d(t,{R:()=>o,x:()=>a});var i=n(6540);const s={},r=i.createContext(s);function o(e){const t=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);